# 🎮 AZGames 游戏监控系统使用说明

## 📖 系统简介

这是一个基于 **Python + GitHub Actions** 的自动化监控系统，可以：

- ✅ 每小时自动监控 AZGames 三个分类的新游戏
- ✅ 自动检测并记录新增游戏
- ✅ 通过 GitHub Issue 推送通知
- ✅ 完全云端运行，无需本地服务器

## 🚀 快速部署（3步完成）

### 第一步：创建 GitHub 仓库并上传代码

1. 登录 [GitHub](https://github.com)
2. 创建新仓库（建议命名为 `azgames-monitor`）
3. 在本地项目目录执行：

```bash
git init
git add .
git commit -m "初始化游戏监控系统"
git branch -M main
git remote add origin https://github.com/你的用户名/仓库名.git
git push -u origin main
```

### 第二步：配置 GitHub Actions 权限

1. 进入仓库 **Settings** → **Actions** → **General**
2. 在 **Workflow permissions** 选择 **Read and write permissions**
3. 勾选 **Allow GitHub Actions to create and approve pull requests**
4. 点击 **Save**

### 第三步：测试运行

1. 进入 **Actions** 标签页
2. 选择 **游戏监控** 工作流
3. 点击 **Run workflow** 手动触发
4. 等待运行完成（约1-2分钟）

## ✅ 验证系统是否正常

运行成功后，你应该看到：

- ✅ Actions 显示绿色勾号
- ✅ `games_data.json` 文件被创建/更新
- ✅ 如果是首次运行，会建立基准数据（不会创建 Issue）
- ✅ 之后发现新游戏时，会自动创建 Issue 通知

## 📬 接收通知

### 方式一：GitHub 邮件通知（推荐）

1. 进入 GitHub 账户 **Settings** → **Notifications**
2. 确保 **Email** 通知已启用
3. 勾选 **Issues** 相关选项
4. 当发现新游戏时，会收到邮件

### 方式二：GitHub 移动应用推送

1. 下载 GitHub App（iOS/Android）
2. 登录并启用通知
3. 实时接收新游戏推送

### 方式三：查看 Issues 页面

直接访问仓库的 **Issues** 标签页查看所有通知记录

## ⚙️ 自定义配置

### 修改监控频率

编辑 `.github/workflows/monitor.yml`：

```yaml
on:
  schedule:
    - cron: '0 * * * *'      # 每小时（默认）
    # - cron: '0 */2 * * *'  # 每2小时
    # - cron: '0 */6 * * *'  # 每6小时
    # - cron: '0 0 * * *'    # 每天0点（UTC）
```

**注意**：cron 使用 UTC 时间，北京时间需要 +8 小时

### 添加更多监控网址

编辑 `config.py`：

```python
URLS = [
    {
        'name': 'trending-games',
        'url': 'https://azgames.io/trending-games',
        'display_name': '热门趋势游戏'
    },
    # 添加新的URL
    {
        'name': 'new-category',
        'url': 'https://azgames.io/new-category',
        'display_name': '新分类'
    }
]
```

## 🧪 本地测试

在推送到 GitHub 之前，可以先本地测试：

```bash
# 安装依赖
pip install -r requirements.txt

# 运行测试
python test_local.py

# 或直接运行监控
python monitor.py
```

## 📊 查看监控数据

### 游戏数据文件

`games_data.json` 保存了所有游戏的最新状态：

```json
{
  "trending-games": [
    {
      "name": "Slope Rider",
      "url": "https://azgames.io/slope-rider"
    }
  ]
}
```

### 查看历史记录

- **Issues 页面**：每次发现新游戏都会创建 Issue
- **Actions 日志**：查看每次运行的详细日志
- **Commits 历史**：查看 `games_data.json` 的更新记录

## ❓ 常见问题

### Q1: 为什么首次运行没有创建 Issue？

**A**: 首次运行会建立基准数据，只有之后检测到新游戏才会创建 Issue。

### Q2: Actions 运行失败怎么办？

**A**: 点击失败的运行查看日志，常见原因：
- 权限设置不正确
- 网络问题
- 依赖安装失败

### Q3: 如何暂停监控？

**A**: 两种方法：
1. 在 Actions 页面禁用工作流
2. 删除 `.github/workflows/monitor.yml` 文件

### Q4: 可以监控其他网站吗？

**A**: 可以！修改 `scraper.py` 中的解析逻辑即可。

### Q5: 如何修改通知内容？

**A**: 编辑 `monitor.py` 中的 `create_issue_body()` 函数。

## 🔧 高级功能

### 添加 Webhook 通知

可以在 GitHub Actions 中添加 Webhook 步骤，发送到：
- Discord
- Slack
- 钉钉
- 企业微信
- Telegram

### 数据导出

可以修改代码将数据导出为：
- CSV 文件
- Excel 表格
- 数据库（MySQL, PostgreSQL）

### 定制报告格式

修改 `monitor.py` 中的报告生成逻辑，支持：
- 自定义 Markdown 样式
- 添加统计图表
- 生成 HTML 报告

## 📁 项目文件说明

```
monitoring/
├── .github/workflows/
│   └── monitor.yml          # GitHub Actions 配置
├── config.py                # 配置文件（URL、设置）
├── scraper.py               # 网页爬虫
├── monitor.py               # 监控主程序
├── test_local.py            # 本地测试脚本
├── games_data.json          # 游戏数据（自动生成）
├── requirements.txt         # Python 依赖
├── .gitignore              # Git 忽略文件
├── README.md               # 英文文档
└── 使用说明.md              # 中文说明（本文件）
```

## 🎯 工作流程

```
每小时触发
    ↓
抓取三个网址
    ↓
解析游戏列表
    ↓
与历史数据对比
    ↓
发现新游戏？
    ├─ 是 → 创建 GitHub Issue → 发送通知
    └─ 否 → 仅更新数据
    ↓
保存到 games_data.json
    ↓
提交到 GitHub
```

## 💡 使用技巧

1. **首次运行建议**：手动触发一次，确保系统正常工作
2. **通知设置**：建议同时启用邮件和移动应用通知
3. **定期检查**：每周查看一次 Actions 日志，确保正常运行
4. **数据备份**：定期下载 `games_data.json` 作为备份

## 🆘 获取帮助

如遇到问题：

1. 查看 Actions 运行日志
2. 检查本文档的常见问题部分
3. 在仓库创建 Issue 描述问题
4. 查看 GitHub Actions 官方文档

## 📝 更新日志

- **v1.0** (2025-11-20)
  - ✅ 初始版本发布
  - ✅ 支持三个分类监控
  - ✅ GitHub Issue 通知
  - ✅ 每小时自动运行

## 📄 许可证

MIT License - 可自由使用和修改

---

**祝您使用愉快！** 🎮
